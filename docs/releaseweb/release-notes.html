<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>2.2.3 Release Notes</title>
<link rel="stylesheet" href="styles/pos.css" type="text/css">
<link rel="stylesheet" href="styles/styles.css" type="text/css">
<meta name="generator" content="DocBook XSL Stylesheets V1.70.0">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF">
<div id="frame">
<div class="article" lang="en">
<div class="titlepage">
<div><div><h1 class="title">
<a name="id2009877"></a>2.2.3 Release Notes</h1></div></div>
<hr>
</div>
<div class="toc">
<p><b>Table of Contents</b></p>
<dl>
<dt><span class="sect1"><a href="#overview">1. Overview</a></span></dt>
<dt><span class="sect1"><a href="#migration-220">2. Migrating from 2.2.0</a></span></dt>
<dt><span class="sect1"><a href="#migration-21x">3. Migrating from 2.1.x</a></span></dt>
<dd><dl>
<dt><span class="sect2"><a href="#new">3.1. What's New</a></span></dt>
<dt><span class="sect2"><a href="#migration">3.2. Migration Issues</a></span></dt>
</dl></dd>
<dt><span class="sect1"><a href="#maintenance">4. Maintenance Branch</a></span></dt>
<dt><span class="sect1"><a href="#resolved">5. Fixes Included in this Release</a></span></dt>
<dt><span class="sect1"><a href="#open-issues">6. Open Issues</a></span></dt>
</dl>
</div>


    <div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="overview"></a>1.&nbsp;Overview</h2></div></div></div>

        <p>2.2.3 adds a critical security fix to the 2.2.2 maintenance release and should therefore be taken to simply supersede 2.2.2.  Anyone running unpatched versions of 2.2.1 or 2.2.2 should upgrade to 2.2.3 immediately.  The security hole patched would allow a user of the system to view all attachments on the system through the browser (JIRA issue <a href="http://bugs.sakaiproject.org/jira/browse/SAK-7288" target="_top">SAK-7288</a>).  A related issue would also allow attachments to be altered or deleted through a WebDAV client (<a href="http://bugs.sakaiproject.org/jira/browse/SAK-7672" target="_top">SAK-7672</a>).</p>
    </div>
    <div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="migration-220"></a>2.&nbsp;Migrating from 2.2.0</h2></div></div></div>

        <p>Since all 2.2 minor releases involve no API changes, a migration from 2.2.0 is very
            simple and straightforward: skins, providers, and other code written for the 2.2
            codebase should be fine.</p>
        <p>Some of the 2.2.1 fixes, however, were applied to the DB schema, and so a DB conversion
            script is still necessary for that upgrade, although neither 2.2.2 nor 2.2.3 introduced any schema changes. The conversion scripts to be applied - in
            distinct versions for MySQL and Oracle, respectively - are found in the
                <code class="filename">reference/docs/conversion</code> folder of the release or on
            subversion:</p>
        <div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term">MySQL:</span></td>
<td>
                    <p>
                        <a href="https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/conversion/sakai_2_2_0-2_2_1_mysql_conversion.sql" target="_top">https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/conversion/sakai_2_2_0-2_2_1_mysql_conversion.sql</a>
                    </p>
                </td>
</tr>
<tr>
<td>
<span class="term">Oracle:</span></td>
<td>
                    <p>
                        <a href="https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/conversion/sakai_2_2_0-2_2_1_oracle_conversion.sql" target="_top">https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/conversion/sakai_2_2_0-2_2_1_oracle_conversion.sql</a>
                    </p>
                </td>
</tr>
</tbody>
</table></div>
        <p>That's it for a migration from 2.2.0. You can freely skip past most of the rest of
            this page, though you'll probably want to jump down and skim the <a href="#resolved" title="5.&nbsp;Fixes Included in this Release">fixed issues</a> and <a href="#open-issues" title="6.&nbsp;Open Issues">open
            issues</a> sections.</p>
    </div>
    <div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="migration-21x"></a>3.&nbsp;Migrating from 2.1.x</h2></div></div></div>

        <p>If you're moving to 2.2.3 from a 2.1 version (or earlier), the changes are more
            significant, and since the 2.2 code is still fairly recent, it's worth spending a little
            more time here to describe what you can look forward to.</p>
        <div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="new"></a>3.1.&nbsp;What's New</h3></div></div></div>

            <div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="new-enhance"></a>3.1.1.&nbsp;Enhancements</h4></div></div></div>

                <div class="sect4" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="new-enhance-framework"></a>3.1.1.1.&nbsp;Framework Refactoring</h5></div></div></div>

                    <p>The 2.2 codebase marks the culmination of a significant effort to
                        restructure the framework into more logical functional/architectural units,
                        paving the way for multiple, focused teams to work in parallel on moving the
                        framework and legacy code forward.</p>
                    <p>These changes in themselves do not have a direct functional impact, but
                        they are echoed by a change in the organization of Sakai's subversion
                        repository, and many services and packages have different names from those
                        in 2.1. To see more discussion of migration issues that may result, see
                        below.</p>
                </div>
                <div class="sect4" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="new-enhance-group"></a>3.1.1.2.&nbsp;Group Awareness</h5></div></div></div>

                    <p>Group awareness has been extended to three additional tools: Resources,
                        Assignments, and Schedule. That is to say, the contents of each of those
                        tools can have their access restricted to specific groups, as they are
                        defined by site maintainers in the <span class="emphasis"><em>Site Info</em></span>
                    tool.</p>
                </div>
                <div class="sect4" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="new-enhance-eid"></a>3.1.1.3.&nbsp;EID/UID Separation</h5></div></div></div>

                    <p>For the last few releases we've been working to introduce the concept of
                        "internal" and "external" identifiers in Sakai in the user records. We
                        started with a single identifier that had to play both of these roles, and
                        have been tweaking the code to separate these out. This separation was
                        completed with 2.2.0. It is now possible for an institution to, for example,
                        alter the enterprise IDs of their users without losing access to their sites
                        and materials in Sakai. For a thorough discussion of these changes, see the
                        doc <code class="filename">reference/docs/architecture/sakai_id_eid.doc</code> (or in
                        subversion at: <a href="https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/architecture/sakai_id_eid.doc" target="_top">https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/architecture/sakai_id_eid.doc</a>)</p>
                </div>
                <div class="sect4" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="new-enhance-fck"></a>3.1.1.4.&nbsp;FCKeditor</h5></div></div></div>

                    <p>The FCKeditor WYSIWYG editor was available in 2.1, but not the default. In
                        2.2 it has become the default editor. HTMLArea is still included, however,
                        and the default editor may be overridden in
                        <code class="filename">sakai.properties</code> by altering the following setting:</p>
                    <pre class="screen">
# specify the wysiwyg editor
wysiwyg.editor=FCKeditor</pre>
                </div>
                <div class="sect4" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="new-enhance-skins"></a>3.1.1.5.&nbsp;Included Skins</h5></div></div></div>

                    <p>The three highest-scoring skins from the recent skins contest have been
                        included in the distribution. You can make any of these your default skin by
                        using the following property in <code class="filename">sakai.properties</code> (other
                        possible values are commented out in the example below):</p>
                    <pre class="screen">
# The default skin for sites without a skin setting
# skin.default=gen-u
# skin.default=examp-u
# skin.default=some-u
skin.default=default</pre>
                </div>
                <div class="sect4" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="new-enhance-help"></a>3.1.1.6.&nbsp;Updated Help Content</h5></div></div></div>

                    <p>Help content in 2.1 was out of date, reflecting only version 2.0 of the
                        software. The help content has been updated for 2.2, along with some style
                        improvements. To see the ongoing work of the Help project, visit their space
                        in Confluence:</p>
                    <p>
                        <a href="http://bugs.sakaiproject.org/confluence/display/HELP/Home" target="_top">http://bugs.sakaiproject.org/confluence/display/HELP/Home</a>
                    </p>
                </div>
                <div class="sect4" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="new-enhance-translate"></a>3.1.1.7.&nbsp;New translations</h5></div></div></div>

                    <p>New interface translations for French and Catalan, as well as updated
                        Japanese translations, are available in this release. See
                            <code class="filename">reference/docs/readme_i18n.txt</code> for more
                        information.</p>
                </div>
            </div>
            <div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="new-tools"></a>3.1.2.&nbsp;New Tools</h4></div></div></div>

                <div class="sect4" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="new-tools-osp"></a>3.1.2.1.&nbsp;Open Source Portfolio</h5></div></div></div>

                    <p>2.2 involves closer integration with the <span class="emphasis"><em>Open Source
                        Portfolio</em></span>, an existing suite of tools supporting portfolio
                        activities, and which are available in this release as <a href="provisional.html" target="_top">provisional tools</a>. Using OSP,
                        individuals can collect items, reflect, design portfolios, and publish them
                        to designated audiences. Instructors and program administrators are able to
                        provide structure and guidance to an individual's work that include
                        step-by-step (sequential) wizards, matrices of goals/standards, and
                        hierarchies to organize related work.</p>
                </div>
                <div class="sect4" lang="en">
<div class="titlepage"><div><div><h5 class="title">
<a name="new-tools-provisional"></a>3.1.2.2.&nbsp;Provisional Tools</h5></div></div></div>

                    <p>Sakai 2.2 has added four new provisional tools</p>
                    <div class="itemizedlist"><ul>
<li>
                            <p><span class="emphasis"><em>Message Center:</em></span> a tool combining a discussion
                                forum with private messaging.</p>
                        </li>
<li>
                            <p><span class="emphasis"><em>Search:</em></span> a tool providing a Google-like search
                                of all site content.</p>
                        </li>
<li>
                            <p><span class="emphasis"><em>Summary Calendar:</em></span> a synoptic calendar view
                                that may be used in either the <span class="emphasis"><em>My Workspace</em></span> or
                                the Home page of course/project sites, including an event summary
                                from either all the sites to which a user is a member (if in
                                    <span class="emphasis"><em>My Workspace</em></span>) or the events of a particular
                                site (if in that site).</p>
                        </li>
<li>
                            <p><span class="emphasis"><em>Post 'Em:</em></span> an automated reporting system that
                                enables faculty to post grades and comments without compromising
                                student privacy. Post &lsquo;Em accepts CSV files, empowering faculty to
                                track student grades in a spreadsheet application of their
                            choice.</p>
                        </li>
</ul></div>
                    <p>You can find more details about these and all other provisional tools on
                        the <a href="provisional.html" target="_top">provisional tools</a> page.</p>
                </div>
            </div>
        </div>
        <div class="sect2" lang="en">
<div class="titlepage"><div><div><h3 class="title">
<a name="migration"></a>3.2.&nbsp;Migration Issues</h3></div></div></div>

            <div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="migration-conversion"></a>3.2.1.&nbsp;Database Conversion</h4></div></div></div>

                <p>A database conversion is required for a migration from 2.2.0 to 2.2.1, but not
                    for a migration from 2.2.1 to 2.2.3. Since DB conversions require the successive
                    application of all intermediate scripts, a migration from a 2.1.x or earlier
                    version will require at least two conversions (e.g. one from 2.1.2 to 2.2.0, and
                    then one from 2.2.0 to 2.2.1). The conversion scripts to be applied - in
                    distinct versions for MySQL and Oracle, respectively - are found in the
                        <code class="filename">reference/docs/conversion</code> folder of the release or on
                    subversion:</p>
                <p>
                    <a href="https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/conversion" target="_top">
                        https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/conversion</a>
                </p>
                <div class="note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Examine before using</h3>

                    <p>As a general rule, be sure to read through these conversion scripts before
                        applying them. They do not take into account any special customizations you
                        may have made - such as new roles, or the deployment of additional tools -
                        and they may complicate your migration with unintended consequences if you
                        execute the script blindly.</p>
                    <p>The <span class="emphasis"><em>Message Center</em></span> tool offers one such particular
                        example for 2.2. A number of schools deployed <span class="emphasis"><em>Message
                        Center</em></span> in 2.1.x production, before it was yet a provisional tool.
                        Now that it is a provisional tool, the conversion scripts were written to
                        introduce its tables, and thus assume that <span class="emphasis"><em>Message
                        Center</em></span> is a new tool for your deployment. If it isn't, you'll
                        want to comment out the portions of the 2.1.2 - 2.2.0 conversion script that
                        treat it, and instead perform the following conversions:</p>
                    <div class="variablelist"><table border="0">
<col align="left" valign="top">
<tbody>
<tr>
<td>
<span class="term">MySQL:</span></td>
<td>
                                <pre class="screen">
ALTER TABLE MFR_TOPIC_T ADD DEFAULTASSIGNNAME VARCHAR(255);
ALTER TABLE MFR_OPEN_FORUM_T ADD DEFAULTASSIGNNAME VARCHAR(255);
ALTER TABLE MFR_MESSAGE_T ADD GRADEASSIGNMENTNAME VARCHAR(255);
ALTER TABLE MFR_MESSAGE_T ADD GRADECOMMENT VARCHAR(255);</pre>
                            </td>
</tr>
<tr>
<td>
<span class="term">Oracle:</span></td>
<td>
                                <pre class="screen">
ALTER TABLE MFR_TOPIC_T ADD DEFAULTASSIGNNAME VARCHAR2(255) NULL;
ALTER TABLE MFR_OPEN_FORUM_T ADD DEFAULTASSIGNNAME VARCHAR2(255) NULL;
ALTER TABLE MFR_MESSAGE_T ADD GRADEASSIGNMENTNAME VARCHAR2(255) NULL;
ALTER TABLE MFR_MESSAGE_T ADD GRADECOMMENT VARCHAR2(255) NULL;</pre>
                            </td>
</tr>
</tbody>
</table></div>
                </div>
            </div>
            <div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="migration-api"></a>3.2.2.&nbsp;Framework Changes</h4></div></div></div>

                <p>If you're migrating from an earlier version you'll also need to be apprised of
                    the framework changes that the 2.2 codebase involves. The 2.2 refactoring means
                    that many package names have changed from 2.1, and these differences will mainly
                    be encountered in <code class="filename">sakai.properties</code> settings with bean
                    references. It's best to not try to use a <code class="filename">sakai.properties</code>
                    from a previous release, and instead start with the sample in
                        <code class="filename">reference/docs/sakai.properties</code>.</p>
                <p>Any custom code, such as providers, may also need revision. See below for more
                    discussion of providers in particular.</p>
            </div>
            <div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="migration-providers"></a>3.2.3.&nbsp;Provider Changes</h4></div></div></div>

                <p>As mentioned above, 2.2 introduces a separation of external user identifiers
                    from Sakai's internal user ids. Any custom
                    <code class="filename">UserDirectoryProvider</code> will need some alteration to account
                    for this, along with changes to its import statements and declarations that stem
                    from API changes. Below is a list of changes that a typical provider should
                    require:</p>
                <div class="orderedlist"><ol type="1">
<li>
                        <p>Import statements altered to reflect new package names.</p>
                    </li>
<li>
                        <p>A search and replace to turn getters and setters from, e.g., 'getId'
                            to 'getEid'.</p>
                    </li>
<li>
                        <p>Revise the <code class="filename">project.xml</code> files in both the provider
                            module and 'component' with the appropriate UDP location.</p>
                    </li>
<li>
                        <p>Change the Spring bean declaration in
                            <code class="filename">component.xml</code>.</p>
                    </li>
<li>
                        <p>The UDP class may implement the <code class="filename">DisplayAdvisorUDP</code>
                            interface (optional), and the two additional methods this pulls in.
                        </p>
                    </li>
</ol></div>
                <p>Be sure to review the <code class="filename">SampleUserDirectoryProvider</code>, and
                    compare it against the sample for previous releases:</p>
                <p>
                    <a href="https://source.sakaiproject.org/svn/providers/tags/sakai_2-2-3/sample/src/java/org/sakaiproject/provider/user/SampleUserDirectoryProvider.java" target="_top">https://source.sakaiproject.org/svn/providers/tags/sakai_2-2-3/sample/src/java/org/sakaiproject/provider/user/SampleUserDirectoryProvider.java</a>
                </p>
            </div>
            <div class="sect3" lang="en">
<div class="titlepage"><div><div><h4 class="title">
<a name="skins"></a>3.2.4.&nbsp;Skin Changes</h4></div></div></div>

                <p>A number of CSS changes will need to be made to any 2.1 skins in order to
                    adapt them to 2.2 versions. These changes - including conversion steps - are
                    thoroughly documented in the appendices of the skin document available in
                        <code class="filename">reference/docs/architecture/sakai_skin.doc</code>, or in
                    subversion at: <a href="https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/architecture/sakai_skin.doc" target="_top">https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-3/docs/architecture/sakai_skin.doc</a></p>
            </div>
        </div>
    </div>
    <div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="maintenance"></a>4.&nbsp;Maintenance Branch</h2></div></div></div>

        <p>The code of each release has a corresponding maintenance branch, which is patched with
            fixes in an ongoing way by a branch manager - effectively until there is no longer
            sufficient interest in it for a branch manager to volunteer. Maintenance branches
            therefore represent the latest snapshot of fixes for any given Sakai version.</p>
        <p>These maintenance branches may be checked out through subversion; they are labeled
            with an 'x' replacing their minor version number, e.g. '2-2-x'. You can check out the
            2.2 maintenance branch with the following command: </p>
        <p>
            <span><strong class="command">svn export
            https://source.sakaiproject.org/svn/sakai/branches/sakai_2-2-x/</strong></span>
        </p>
        <p>If you come upon an important fix that you believe should be included in the branch
            (and perhaps isn't yet), feel free to bring it to the attention of the branch manager,
            Lance Speelmon (lance@indiana.edu).</p>
    </div>
    <div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="resolved"></a>5.&nbsp;Fixes Included in this Release</h2></div></div></div>

        <p>Sakai 2.2.3 fixes the following issue from 2.2.2:</p>
        <p>
            <a href="fixed-issues.html" target="_top">
                http://source.sakaiproject.org/release/2.2.3/fixed-issues.html</a>
        </p>
    </div>
    <div class="sect1" lang="en">
<div class="titlepage"><div><div><h2 class="title">
<a name="open-issues"></a>6.&nbsp;Open Issues</h2></div></div></div>

        <p>The list of known issues with Sakai 2.2.3 is found at:</p>
        <p>
            <a href="open-issues.html" target="_top">
                http://source.sakaiproject.org/release/2.2.3/open-issues.html</a>
        </p>
        <p>See in particular the "Important Issues" noted at the top of the list.</p>
    </div>
</div>
<br clear="all"></div>
</body>
</html>

