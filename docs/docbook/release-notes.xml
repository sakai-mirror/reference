<?xml version="1.0" encoding="UTF-8"?>
<?oxygen RNGSchema="http://docbook.org/xml/5.0b5/rng/docbook.rng" type="xml"?>
<article xmlns="http://docbook.org/ns/docbook" xml:lang="en" xmlns:xl="http://www.w3.org/1999/xlink"
    version="5.0">

    <info>
        <title>2.2.0 Release Notes</title>
        <edition>14 July 2006 - version 2.2.0</edition>
    </info>
    <sect1 xml:id="new">
        <title>What's New</title>
        <sect2 xml:id="new-enhance">
            <title>Enhancements</title>
            <sect3 xml:id="new-enhance-framework">
                <title>Framework Refactoring</title>
                <para>The 2.2.0 release marks the culmination of a significant effort to restructure
                    the framework into more logical functional/architectural units, paving the way
                    for multiple, focused teams to work in parallel on moving the framework and
                    legacy code forward.</para>
                <para>These changes in themselves do not have a direct functional impact, but they
                    are echoed by a change in the organization of Sakai's subversion repository, and
                    many services and packages have different names from those in 2.1. To see more
                    discussion of migration issues that may result, see below.</para>
            </sect3>
            <sect3 xml:id="new-enhance-group">
                <title>Group Awareness</title>
                <para>Group awareness has been extended to three additional tools: Resources,
                    Assignments, and Schedule. That is to say, the contents of each of those tools
                    can have their access restricted to specific groups, as they are defined by site
                    maintainers in the <emphasis>Site Info</emphasis> tool.</para>
            </sect3>
            <sect3 xml:id="new-enhance-eid">
                <title>EID/UID Separation</title>
                <para>For the last few releases we've been working to introduce the concept of
                    "internal" and "external" identifiers in Sakai in the user records. We started
                    with a single identifier that had to play both of these roles, and have been
                    tweaking the code to separate these out. For 2.2.0 we have completed this
                    separation. It is now possible for an institution to, for example, alter the
                    enterprise IDs of their users without losing access to their sites and materials
                    in Sakai. For a thorough discussion of these changes, see the doc
                        <filename>reference/docs/architecture/sakai_id_eid.doc</filename> (or in
                    subversion at: <link
                        xl:href="https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-0/docs/architecture/sakai_id_eid.doc"
                        >https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-0/docs/architecture/sakai_id_eid.doc</link>)</para>
            </sect3>
            <sect3 xml:id="new-enhance-fck">
                <title>FCKeditor</title>
                <para>The FCKeditor WYSIWYG editor was available in 2.1, but not the default. In
                    2.2.0 it has become the default editor. HTMLArea is still included, however, and
                    the default editor may be overridden in <filename>sakai.properties</filename> by
                    altering the following setting:</para>
                <screen>
# specify the wysiwyg editor 
wysiwyg.editor=FCKeditor</screen>
            </sect3>
            <sect3 xml:id="new-enhance-skins">
                <title>Included Skins</title>
                <para>The three highest-scoring skins from the recent skins contest have been
                    included in the distribution. You can make any of these your default skin by
                    using the following property in <filename>sakai.properties</filename> (other
                    possible values are commented out in the example below):</para>
                <screen>
# The default skin for sites without a skin setting
# skin.default=gen-u
# skin.default=examp-u
# skin.default=some-u
skin.default=default</screen>
            </sect3>
            <sect3 xml:id="new-enhance-help">
                <title>Updated Help Content</title>
                <para>Help content in 2.1 was out of date, reflecting only version 2.0 of the
                    software. The help content has been updated for 2.2.0, along with some style
                    improvements. To see the ongoing work of the Help project, visit their space in
                    Confluence:</para>
                <para>
                    <link xl:href="http://bugs.sakaiproject.org/confluence/display/HELP/Home"
                        >http://bugs.sakaiproject.org/confluence/display/HELP/Home</link>
                </para>
            </sect3>
            <sect3 xml:id="new-enhance-translate">
                <title>New translations</title>
                <para>New interface translations for French and Catalan, as well as updated Japanese translations, are
                    available in this release. See
                        <filename>reference/docs/readme_i18n.txt</filename> for more information.</para>
            </sect3>
        </sect2>
        <sect2 xml:id="new-tools">
            <title>New Tools</title>
            <sect3 xml:id="new-tools-osp">
                <title>Open Source Portfolio</title>
                <para>2.2.0 marks closer integration with the Open Source Portfolio, an existing suite of tools supporting portfolio activities,
                    and which are available in this release as
                    <link
                        xl:href="provisional.html">provisional tools</link>. Using OSP, individuals can collect
                    items, reflect, design portfolios, and publish them to
                    designated audiences. Instructors and program administrators
                    are able to provide structure and guidance to an individual's
                    work that include step-by-step (sequential) wizards, matrices
                    of goals/standards, and hierarchies to organize related work.</para>
            </sect3>
            <sect3 xml:id="new-tools-provisional">
                <title>Provisional Tools</title>
            <para>Sakai 2.2.0 has added four new provisional tools</para>
            <itemizedlist>
                <listitem>
                    <para><emphasis>Message Center:</emphasis> a tool combining a discussion forum
                        with private messaging.</para>
                </listitem>

                <listitem>
                    <para><emphasis>Search:</emphasis> a tool providing a Google-like search of all
                        site content.</para>
                </listitem>

                <listitem>
                    <para><emphasis>Summary Calendar:</emphasis> a synoptic calendar view that may
                        be used in either the <emphasis>My Workspace</emphasis> or the Home page of
                        course/project sites, including an event summary from either all the sites
                        to which a user is a member (if in <emphasis>My Workspace</emphasis>) or the
                        events of a particular site (if in that site).</para>
                </listitem>

                <listitem>
                    <para><emphasis>Post 'Em:</emphasis> an automated reporting system that enables
                        faculty to post grades and comments without compromising student privacy.
                        Post â€˜Em accepts CSV files, empowering faculty to track student grades in a
                        spreadsheet application of their choice.</para>
                </listitem>

            </itemizedlist>
            <para>You can find more details about these and all other provisional tools on the <link
                    xl:href="provisional.html">provisional tools</link> page.</para>
            </sect3>
        </sect2>
    </sect1>
    <sect1 xml:id="migration">
        <title>Migration Issues</title>
        <sect2 xml:id="migration-conversion">
            <title>Database Conversion</title>
            <para>There are database schema changes between 2.1.2 and 2.2.0, and the conversion
                scripts to be applied - in distinct versions for MySQL and Oracle, respectively -
                are found in the <filename>reference/docs/conversion</filename> folder of the
                release or on subversion:</para>
            <variablelist>
                <varlistentry>
                    <term>MySQL:</term>
                    <listitem>
                        <para>
                            <link
                                xl:href="https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-0/docs/conversion/sakai_2_1_2-2_2_0_mysql_conversion.sql"
                                >https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-0/docs/conversion/sakai_2_1_2-2_2_0_mysql_conversion.sql</link>
                        </para>
                    </listitem>
                </varlistentry>
                <varlistentry>
                    <term>Oracle:</term>
                    <listitem>
                        <para>
                            <link
                                xl:href="https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-0/docs/conversion/sakai_2_1_2-2_2_0_oracle_conversion.sql"
                                >https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-0/docs/conversion/sakai_2_1_2-2_2_0_oracle_conversion.sql</link>
                        </para>
                    </listitem>
                </varlistentry>
            </variablelist>
            <para>In the same directory you'll also find conversion scripts for earlier Sakai
                versions. Migration from an earlier version will require the successive application
                of all intermediate conversion scripts. You cannot, for example, move from 2.1.1 to
                2.2.0 by applying a single DB script. You will need to move first from 2.1.1 to
                2.1.2, and then to 2.2.0.</para>
            <note>
                <title>Examine before using</title>
                <para>As a general rule, be sure to read through these conversion scripts before
                    applying them. They do not take into account any special customizations you may
                    have made - such as new roles, or the deployment of additional tools - and they
                    may complicate your migration with unintended consequences if you execute the
                    script blindly.</para>
                <para>For the 2.2.0 release, the <emphasis>Message Center</emphasis> tool offers one
                    such particular example. A number of schools deployed <emphasis>Message
                    Center</emphasis> in 2.1.x production, before it was yet a provisional tool. Now
                    that it is a provisional tool, the conversion scripts were written to introduce
                    its tables, and thus assume that <emphasis>Message Center</emphasis> is a new
                    tool for your deployment. If it isn't, you'll want to comment out the portions
                    of the conversion script that treat it, and instead perform the following
                    conversions:</para>
                <variablelist>
                    <varlistentry>
                        <term>MySQL:</term>
                        <listitem>
                            <screen>
ALTER TABLE MFR_TOPIC_T ADD DEFAULTASSIGNNAME VARCHAR(255);
ALTER TABLE MFR_OPEN_FORUM_T ADD DEFAULTASSIGNNAME VARCHAR(255);
ALTER TABLE MFR_MESSAGE_T ADD GRADEASSIGNMENTNAME VARCHAR(255);
ALTER TABLE MFR_MESSAGE_T ADD GRADECOMMENT VARCHAR(255);</screen>
                        </listitem>
                    </varlistentry>
                    <varlistentry>
                        <term>Oracle:</term>
                        <listitem>
                            <screen>
ALTER TABLE MFR_TOPIC_T ADD DEFAULTASSIGNNAME VARCHAR2(255) NULL;
ALTER TABLE MFR_OPEN_FORUM_T ADD DEFAULTASSIGNNAME VARCHAR2(255) NULL;
ALTER TABLE MFR_MESSAGE_T ADD GRADEASSIGNMENTNAME VARCHAR2(255) NULL;
ALTER TABLE MFR_MESSAGE_T ADD GRADECOMMENT VARCHAR2(255) NULL;</screen>
                        </listitem>
                    </varlistentry>
                </variablelist>
            </note>
        </sect2>
        <sect2 xml:id="migration-api">
            <title>Framework Changes</title>
            <para>The 2.2 refactoring means that many package names have changed, and these
                differences will mainly be encountered in <filename>sakai.properties</filename>
                settings with bean references. It's best to not try to use a
                    <filename>sakai.properties</filename> from a previous release, and instead start
                with the sample in <filename>reference/docs/sakai.properties</filename>.</para>
            <para>Any custom code, such as providers, may also need revision. See below for more
                discussion of providers in particular.</para>
        </sect2>
        <sect2 xml:id="migration-providers">
            <title>Provider Changes</title>
            <para>As mentioned above, 2.2.0 introduces a separation of external user identifiers
                from Sakai's internal user ids. Any custom
                <filename>UserDirectoryProvider</filename> will need some alteration to account for
                this, along with changes to its import statements and declarations that stem from
                API changes. Below is a list of changes that a typical provider should require:</para>
            <orderedlist>
                <listitem>
                    <para>Import statements altered to reflect new package names.</para>
                </listitem>
                <listitem>
                    <para>A search and replace to turn getters and setters from, e.g., 'getId' to
                        'getEid'.</para>
                </listitem>
                <listitem>
                    <para>Revise the <filename>project.xml</filename> files in both the provider
                        module and 'component' with the appropriate UDP location.</para>
                </listitem>
                <listitem>
                    <para>Change the Spring bean declaration in
                    <filename>component.xml</filename>.</para>
                </listitem>
                <listitem>
                    <para>The UDP class may implement the <filename>DisplayAdvisorUDP</filename>
                        interface (optional), and the two additional methods this pulls in. </para>
                </listitem>
            </orderedlist>
            <para>Be sure to review the <filename>SampleUserDirectoryProvider</filename>, and
                compare it against the sample for previous releases:</para>
            <para>
                <link
                    xl:href="https://source.sakaiproject.org/svn/providers/tags/sakai_2-2-0/sample/src/java/org/sakaiproject/provider/user/SampleUserDirectoryProvider.java"
                    >https://source.sakaiproject.org/svn/providers/tags/sakai_2-2-0/sample/src/java/org/sakaiproject/provider/user/SampleUserDirectoryProvider.java</link>
            </para>
        </sect2>
        <sect2>
            <title>Skin Changes</title>
            <para>A number of CSS changes will need to be made to any 2.1 skins in order to adapt
                them to 2.2.0. These changes - including conversion steps - are thoroughly
                documented in the appendices of the skin document available in
                    <filename>reference/docs/architecture/sakai_skin.doc</filename>, or in
                subversion at: <link
                    xl:href="https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-0/docs/architecture/sakai_skin.doc"
                    >https://source.sakaiproject.org/svn/reference/tags/sakai_2-2-0/docs/architecture/sakai_skin.doc</link></para>
        </sect2>
    </sect1>
    <sect1 xml:id="maintenance">
        <title>Maintenance Branch</title>
        <para>The code of each release has a corresponding maintenance branch, which is patched with
            fixes in an ongoing way by a branch manager - effectively until there is no longer
            sufficient interest in it for a branch manager to volunteer. Maintenance branches
            therefore represent the latest snapshot of fixes for any given Sakai version.</para>
        <para>These maintenance branches may be checked out through subversion; they are labeled
            with an 'x' replacing their minor version number, e.g. '2-2-x'. You can check out the
            2.2 maintenance branch with the following command: </para>
        <para>
            <command>svn export
            https://source.sakaiproject.org/svn/sakai/branches/sakai_2-2-x/</command>
        </para>
        <para>If you come upon an important fix that you believe should be included in the branch
            (and perhaps isn't yet), feel free to bring it to the attention of the branch manager,
            Lance Speelmon (lance@indiana.edu).</para>
    </sect1>
    <sect1 xml:id="resolved">
        <title>Fixes Included in this Release</title>
        <para>Sakai 2.2.0 fixes the following issues from previous releases:</para>
        <para>
            <link xl:href="fixed-issues.html"
                >http://source.sakaiproject.org/release/2.2.0/fixed-issues.html</link>
        </para>
    </sect1>
    <sect1 xml:id="open-issues">
        <title>Open Issues</title>
        <para>The list of known issues with Sakai 2.2.0 at the time of release is found at:</para>
        <para>
            <link xl:href="open-issues.html"
                >http://source.sakaiproject.org/release/2.2.0/open-issues.html</link>
        </para>
        <para>See in particular the "Important Issues" noted at the top of the list.</para>
    </sect1>
</article>
